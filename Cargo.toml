[workspace]
members = [
  "examples",
  "iroh",
  "iroh-api",
  "iroh-bitswap",
  "iroh-car",
  "iroh-gateway",
  "iroh-localops",
  "iroh-metrics",
  "iroh-one",
  "iroh-p2p",
  "iroh-resolver",
  "iroh-rpc-client",
  "iroh-rpc-types",
  "iroh-share",
  "iroh-unixfs",
  "iroh-store",
  "iroh-util",
  "stores/*",
  "xtask",
]
# even if all crates are set to edition 2021, we still need to force the
# resolver to 2
# https://github.com/gfx-rs/wgpu/issues/2356#issuecomment-1005134986
resolver = "2"

[workspace.package]
version = "0.1.3"
edition = "2021"
license = "Apache-2.0/MIT"
rust-version = "1.65"
repository = "https://github.com/n0-computer/iroh"

[workspace.dependencies]
anyhow = { version = "1", features = ["backtrace"] }
iroh-api = { version = "0.1.3", path = "./iroh-api" }
iroh-bitswap = { version = "0.1.3", path = "./iroh-bitswap" }
iroh-car = { version = "0.1.3", path = "./iroh-car" }
iroh-gateway = { version = "0.1.3", path = "./iroh-gateway" }
iroh-localops = { version = "0.1.3", path = "./iroh-localops" }
iroh-metrics = { version = "0.1.3", path = "./iroh-metrics" }
iroh-p2p = { version = "0.1.3", path = "./iroh-p2p" }
iroh-resolver = { version = "0.1.3", path = "./iroh-resolver" }
iroh-rpc-client = { version = "0.1.3", path = "./iroh-rpc-client" }
iroh-rpc-types = { version = "0.1.3", path = "./iroh-rpc-types" }
iroh-store = { version = "0.1.3", path = "./iroh-store" }
iroh-unixfs = { version = "0.1.3", path = "./iroh-unixfs" }
iroh-util = { version = "0.1.3", path = "./iroh-util" }

[profile.optimized-release]
inherits = 'release'
lto = true
debug = false
debug-assertions = false
opt-level = 3
panic = 'abort'
incremental = false

[profile.docker]
inherits = 'release'
lto = true
debug = false
debug-assertions = false
opt-level = 3
panic = 'abort'
incremental = false

[workspace.metadata.release]
consolidate-commits = true
