[workspace]
members = [
  "examples",
  "iroh",
  "iroh-api",
  "iroh-bitswap",
  "iroh-car",
  "iroh-gateway",
  "iroh-localops",
  "iroh-metrics",
  "iroh-one",
  "iroh-p2p",
  "iroh-resolver",
  "iroh-rpc-client",
  "iroh-rpc-types",
  "iroh-share",
  "iroh-unixfs",
  "iroh-store",
  "iroh-util",
  "stores/*",
  "xtask",
]
# even if all crates are set to edition 2021, we still need to force the
# resolver to 2
# https://github.com/gfx-rs/wgpu/issues/2356#issuecomment-1005134986
resolver = "2"

[workspace.package]
version = "0.1.3"
edition = "2021"
license = "Apache-2.0/MIT"
rust-version = "1.65"
repository = "https://github.com/n0-computer/iroh"

[profile.optimized-release]
inherits = 'release'
lto = true
debug = false
debug-assertions = false
opt-level = 3
panic = 'abort'
incremental = false

[profile.docker]
inherits = 'release'
lto = true
debug = false
debug-assertions = false
opt-level = 3
panic = 'abort'
incremental = false

[workspace.metadata.release]
consolidate-commits = true
